@using Microsoft.AspNetCore.Identity
@inject UserManager<ApplicationUser> UserManager

@{
    Layout = "_Layout";
    ViewData["Title"] = "Videolar";
}

@section Styles {
    <link rel="stylesheet" href="~/css/videos.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .videos-hero{
            display:flex; align-items:center; justify-content:center; text-align:center;
            background:linear-gradient(90deg,#1e88e5,#2196f3);
            color:#fff; padding:90px 16px;
        }
        .vh-title{font-weight:800; letter-spacing:.3px; margin:0; line-height:1.1; font-size:56px;}
        @@media (max-width:768px){ .vh-title{font-size:38px;} }

        .videos-filter{margin-top:24px;}
        .filter-bar{display:flex; gap:10px; flex-wrap:wrap; justify-content:center;}
        .filter-btn{background:#fff; color:#1e88e5; border:1px solid #dbe6f7; padding:8px 14px; border-radius:999px; cursor:pointer; font-weight:600;}
        .filter-btn.active{background:#1e88e5; color:#fff; border-color:transparent;}

        .videos-grid{padding:26px 0 50px;}
        .grid{display:grid; grid-template-columns:repeat(12,1fr); gap:18px;}
        @@media (max-width:1200px){.grid{grid-template-columns:repeat(8,1fr);} }
        @@media (max-width:768px){.grid{grid-template-columns:repeat(4,1fr);} }
        @@media (max-width:480px){.grid{grid-template-columns:repeat(2,1fr);} }

        .v-card{grid-column:span 4; background:#fff; border:1px solid #e8eef6; border-radius:14px; overflow:hidden; box-shadow:0 10px 30px rgba(11,42,87,.08); transition:transform .2s, box-shadow .2s; outline:none;}
        .v-card:hover,.v-card:focus{transform:translateY(-4px); box-shadow:0 16px 42px rgba(11,42,87,.16);} 
        .v-card .thumb{position:relative; background:#000;}
        .v-card .thumb iframe{width:100%; height:200px; display:block;}
        .v-card .thumb .play{position:absolute; inset:auto auto 12px 12px; width:36px; height:36px; border-radius:50%; background:rgba(33,150,243,.9); box-shadow:0 8px 18px rgba(11,42,87,.12);}        
        .v-card h3{margin:10px 12px 14px; font-size:16px; color:#0b2a57; font-weight:700;}

        .v-modal{position:fixed; inset:0; display:none; align-items:center; justify-content:center; z-index:1300;}
        .v-modal[aria-hidden="false"]{display:flex;}
        .v-modal-backdrop{position:absolute; inset:0; background:rgba(0,0,0,.65);} 
        .v-modal-dialog{position:relative; background:#000; border-radius:12px; width:min(92vw,960px); box-shadow:0 20px 60px rgba(0,0,0,.35);}
        .v-close{position:absolute; top:-44px; right:0; background:#fff; color:#0b2a57; border:1px solid #e6ecf5; border-radius:10px; width:36px; height:36px; cursor:pointer;}
        .v-aspect{position:relative; padding-top:56.25%;}
        .v-aspect iframe{position:absolute; inset:0; width:100%; height:100%; border:0;}

        .whatsapp-float {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1001;
        }

        .whatsapp-image {
            width: 90px;
            height: auto;
            transition: transform 0.3s;
        }

        .whatsapp-image:hover {
            transform: scale(1.1);
        }
    </style>
}

<!-- Hero -->
<section class="videos-hero">
    <h1 class="vh-title">Videolar</h1>
</section>

<!-- Filters -->
<section class="videos-filter container">
    <div class="filter-bar" role="tablist" aria-label="Video kategorileri">
        <button class="filter-btn active" data-filter="all" role="tab" aria-selected="true">Tümü</button>
        <button class="filter-btn" data-filter="tanitim" role="tab" aria-selected="false">Tanıtım</button>
        <button class="filter-btn" data-filter="bilgi" role="tab" aria-selected="false">Bilgi</button>
        <button class="filter-btn" data-filter="reklam" role="tab" aria-selected="false">Reklam</button>
        <button class="filter-btn" data-filter="ornek" role="tab" aria-selected="false">Örnek İlan</button>
    </div>
</section>

<!-- Grid -->
<section class="videos-grid container">
    <div class="grid">
        <!-- Tanıtım -->
        <article class="v-card" data-category="tanitim" tabindex="0" data-video="aHXV-8gvZ8s">
            <div class="thumb"><span class="play"></span><iframe src="https://www.youtube.com/embed/aHXV-8gvZ8s" title="Tanıtım" loading="lazy" allowfullscreen></iframe></div>
            <h3>Tanıtım 1</h3>
        </article>
        <article class="v-card" data-category="tanitim" tabindex="0" data-video="QWS0snIZICk">
            <div class="thumb"><span class="play"></span><iframe src="https://www.youtube.com/embed/QWS0snIZICk" title="Tanıtım" loading="lazy" allowfullscreen></iframe></div>
            <h3>Tanıtım 2</h3>
        </article>

        <!-- Bilgi -->
        <article class="v-card" data-category="bilgi" tabindex="0" data-video="PBzoK-ZUWJU">
            <div class="thumb"><span class="play"></span><iframe src="https://www.youtube.com/embed/PBzoK-ZUWJU" title="Bilgi" loading="lazy" allowfullscreen></iframe></div>
            <h3>Bilgi 1</h3>
        </article>
        <article class="v-card" data-category="bilgi" tabindex="0" data-video="nBVAEh-zkb4">
            <div class="thumb"><span class="play"></span><iframe src="https://www.youtube.com/embed/nBVAEh-zkb4" title="Bilgi" loading="lazy" allowfullscreen></iframe></div>
            <h3>Bilgi 2</h3>
        </article>
        <article class="v-card" data-category="bilgi" tabindex="0" data-video="vlkXht4rUWc">
            <div class="thumb"><span class="play"></span><iframe src="https://www.youtube.com/embed/vlkXht4rUWc" title="Bilgi" loading="lazy" allowfullscreen></iframe></div>
            <h3>Bilgi 3</h3>
        </article>
        <article class="v-card" data-category="bilgi" tabindex="0" data-video="ePYBvVNceBw">
            <div class="thumb"><span class="play"></span><iframe src="https://www.youtube.com/embed/ePYBvVNceBw" title="Bilgi" loading="lazy" allowfullscreen></iframe></div>
            <h3>Bilgi 4</h3>
        </article>
        <article class="v-card" data-category="bilgi" tabindex="0" data-video="ZoEwFed6JUM">
            <div class="thumb"><span class="play"></span><iframe src="https://www.youtube.com/embed/ZoEwFed6JUM" title="Bilgi" loading="lazy" allowfullscreen></iframe></div>
            <h3>Bilgi 5</h3>
        </article>
        <article class="v-card" data-category="bilgi" tabindex="0" data-video="mnKbZOPHIL8">
            <div class="thumb"><span class="play"></span><iframe src="https://www.youtube.com/embed/mnKbZOPHIL8" title="Bilgi" loading="lazy" allowfullscreen></iframe></div>
            <h3>Bilgi 6</h3>
        </article>
        <article class="v-card" data-category="bilgi" tabindex="0" data-video="LUPlcih8x2c">
            <div class="thumb"><span class="play"></span><iframe src="https://www.youtube.com/embed/LUPlcih8x2c" title="Bilgi" loading="lazy" allowfullscreen></iframe></div>
            <h3>Bilgi 7</h3>
        </article>
        <article class="v-card" data-category="bilgi" tabindex="0" data-video="YxvWGiaf4HU">
            <div class="thumb"><span class="play"></span><iframe src="https://www.youtube.com/embed/YxvWGiaf4HU" title="Bilgi" loading="lazy" allowfullscreen></iframe></div>
            <h3>Bilgi 8</h3>
        </article>
        <article class="v-card" data-category="bilgi" tabindex="0" data-video="lB1Io0mIe9U">
            <div class="thumb"><span class="play"></span><iframe src="https://www.youtube.com/embed/lB1Io0mIe9U" title="Bilgi" loading="lazy" allowfullscreen></iframe></div>
            <h3>Bilgi 9</h3>
        </article>

        <!-- Reklam -->
        <article class="v-card" data-category="reklam" tabindex="0" data-video="KMtdRLa_i38">
            <div class="thumb"><span class="play"></span><iframe src="https://www.youtube.com/embed/KMtdRLa_i38" title="Reklam" loading="lazy" allowfullscreen></iframe></div>
            <h3>Reklam</h3>
        </article>

        <!-- Biliyor Muydunuz -->
        <article class="v-card" data-category="bilgi" tabindex="0" data-video="r8yufLx3VE4">
            <div class="thumb"><span class="play"></span><iframe src="https://www.youtube.com/embed/r8yufLx3VE4" title="Biliyor Muydunuz" loading="lazy" allowfullscreen></iframe></div>
            <h3>Biliyor Muydunuz?</h3>
        </article>

        <!-- Örnek İlan -->
        <article class="v-card" data-category="ornek" tabindex="0" data-video="NNQvJADgBME">
            <div class="thumb"><span class="play"></span><iframe src="https://www.youtube.com/embed/NNQvJADgBME" title="Örnek İlan" loading="lazy" allowfullscreen></iframe></div>
            <h3>Örnek İlan</h3>
        </article>
    </div>
</section>

<!-- Modal Player -->
<div class="v-modal" id="vModal" aria-hidden="true" role="dialog" aria-label="Video oynatıcı">
    <div class="v-modal-backdrop" data-close></div>
    <div class="v-modal-dialog" role="document">
        <button class="v-close" id="vClose" aria-label="Kapat">×</button>
        <div class="v-aspect">
            <iframe id="vFrame" src="" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
        </div>
    </div>
</div>

<!-- Yüzen öğe -->
<div class="floating-icon">
    <a href="https://mail.google.com/mail/?view=cm&fs=1&to=sftumen41@gmail.com&su=Talep" title="Talep Gönder" target="_blank">
        <img src="~/images/Talep.webp" alt="Talep Gönder">
    </a>
</div>

<!-- WhatsApp Logo -->
<a id="whatsapp-link-8" href="#" target="_blank" class="whatsapp-float">
    <img src="~/sablon/img/724destek.webp" alt="WhatsApp" class="whatsapp-image">
</a>

@section Scripts {
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        (function(){
            const buttons = document.querySelectorAll('.filter-btn');
            const cards = document.querySelectorAll('.v-card');
            buttons.forEach(btn=>{
                btn.addEventListener('click',()=>{
                    buttons.forEach(b=>{b.classList.remove('active'); b.setAttribute('aria-selected','false');});
                    btn.classList.add('active'); btn.setAttribute('aria-selected','true');
                    const f = btn.dataset.filter;
                    cards.forEach(c=>{
                        c.style.display = (f==='all' || c.dataset.category===f) ? '' : 'none';
                    });
                });
            });

            const modal = document.getElementById('vModal');
            const frame = document.getElementById('vFrame');
            const close = document.getElementById('vClose');
            const open = (id)=>{
                modal.setAttribute('aria-hidden','false');
                frame.src = `https://www.youtube.com/embed/${id}?autoplay=1`;
                close.focus();
            };
            const shut = ()=>{
                modal.setAttribute('aria-hidden','true');
                frame.src = '';
            };
            document.addEventListener('click', (e)=>{
                const card = e.target.closest('.v-card');
                if(card){ e.preventDefault(); open(card.dataset.video); }
                if(e.target.hasAttribute('data-close')) shut();
            });
            document.addEventListener('keydown', (e)=>{ if(e.key==='Escape') shut(); });
            close.addEventListener('click', shut);
        })();

        // WhatsApp link
        const isMobile8 = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);
        const whatsappNumber8 = "905070775666";
        const message8 = "Merhaba,%20Şevval%20Emlak%20Sitenizden%20Size%20Ulaşıyorum";
        const whatsappLink8 = isMobile8
            ? `https://wa.me/${whatsappNumber8}?text=${message8}`
            : `https://web.whatsapp.com/send?phone=${whatsappNumber8}&text=${message8}`;
        document.getElementById("whatsapp-link-8").href = whatsappLink8;
    </script>
}