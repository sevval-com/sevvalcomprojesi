@model Sevval.Domain.Entities.IlanModel
@using Microsoft.AspNetCore.Identity
@using Sevval.Domain.Entities
@inject UserManager<ApplicationUser> UserManager

@{
    Layout = null;
}

<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kategori Seçimi</title>
    
    <!-- Stil Dosyaları - Anasayfa ile aynı -->
    <link rel="stylesheet" href="~/css/Anasayfa.css">
    <link rel="stylesheet" href="~/css/navbar.css">
    <link rel="stylesheet" href="~/css/KategoriSecim.css">
    <link rel="stylesheet" href="~/css/hizmetler.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    
    <link rel="icon" type="image/png" href="~/images/favlogo.webp">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="~/js/site.js" defer></script>
    
    <style>
        /* Global - Yatay scroll engelle */
        html, body {
            overflow-x: hidden !important;
            max-width: 100vw !important;
        }
        
        /* KategoriSecim.css ve hizmetler.css navbar override'ları */
        nav.navbaar {
            padding: clamp(10px, 1.5vw, 20px) clamp(15px, 2.5vw, 30px) !important;
        }
        
        nav.navbaar .naav-linkss {
            margin-top: 0 !important;
        }
        
        nav.navbaar .logo img {
            width: auto !important;
            height: clamp(45px, 5vw, 65px) !important;
        }
        
        /* Navbar'daki ziyaretçi sayıları için stil */
        .visitor-counts-navbar {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            font-size: 13px;
            font-weight: 600;
            color: #fff;
            margin-left: 0;
            transform: scale(.95);
            background: rgba(255,255,255,.18);
            border: 1px solid rgba(255,255,255,.35);
            padding: 6px 10px;
            border-radius: 999px;
            backdrop-filter: blur(4px);
            box-shadow: 0 4px 12px rgba(0,0,0,.12);
        }

        .visitor-counts-navbar span {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            line-height: 1;
        }

        .visitor-counts-navbar .icon {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: auto;
            height: auto;
            font-size: 16px;
            line-height: 1;
            color: #01e11b;
            background: transparent;
            border-radius: 0;
            box-shadow: none;
            text-shadow: 0 0 6px rgba(1,225,27,.25);
        }
        
        /* MASAÜSTÜ VE MOBİL NAVBAR DÜZELTMELERİ */
        
        /* Masaüstü - butonlar arası mesafe */
        .auth-buttoons, .auth-buttons {
            gap: 15px !important;
        }
        
        /* Ücretsiz etiketi - masaüstü */
        .post-ad-container {
            position: relative !important;
            display: inline-block !important;
        }
        
        .free-tag {
            position: absolute !important;
            top: -8px !important;
            left: -8px !important;
            background-color: #28a745 !important;
            color: white !important;
            font-size: 9px !important;
            font-weight: bold !important;
            padding: 2px 5px !important;
            border-radius: 3px !important;
            transform: rotate(-12deg) !important;
            z-index: 100 !important;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2) !important;
        }
        
        /* MOBİL NAVBAR - Sadece küçük ekranlarda VE yükseklik 1000px'den küçükse */
        /* Yükseklik 1000px ve üstünde masaüstü görünümü uygulanır */
        @@media (max-width: 991px) and (max-height: 999px) {
            /* KategoriSecim.css ve hizmetler.css mobil override'ları */
            nav.navbaar {
                padding: 0 !important;
                background-color: transparent !important;
                background: linear-gradient(90deg, #009cfb, #0056b3) !important;
            }
            
            nav.navbaar .navbaar-container {
                flex-direction: row !important;
                flex-wrap: nowrap !important;
            }
            
            nav.navbaar .logo {
                margin-right: 0 !important;
            }
            
            nav.navbaar .logo img {
                width: 40px !important;
                height: 40px !important;
            }
            
            nav.navbaar .naav-linkss {
                position: absolute !important;
                top: 100% !important;
                left: auto !important;
                right: 0 !important;
                width: auto !important;
                min-width: 160px !important;
                max-width: 200px !important;
                margin-top: 0 !important;
            }
            
            nav.navbaar .auth-buttoons {
                margin-right: 0 !important;
                width: auto !important;
                justify-content: flex-end !important;
            }
            
            nav.navbaar .haamburger,
            nav.navbaar .hamburger {
                display: none !important;
                position: static !important;
            }
            
            /* Mobil için sayfa içeriği düzeltmeleri */
            .main-container {
                flex-direction: column !important;
                align-items: center !important;
                padding: 10px !important;
                overflow-x: hidden !important;
            }
            
            .container {
                flex-direction: column !important;
                width: 100% !important;
                padding: 10px !important;
                gap: 15px !important;
            }
            
            .step {
                width: 100% !important;
                max-width: 100% !important;
                height: auto !important;
                min-height: 200px !important;
                max-height: 350px !important;
                padding: 15px !important;
            }
            
            h1 {
                font-size: 20px !important;
                margin-top: 15px !important;
            }
            
            .navbaar {
                padding: 0 !important;
                overflow: visible !important;
            }
            
            .navbaar-container {
                display: flex !important;
                flex-direction: row !important;
                align-items: center !important;
                justify-content: space-between !important;
                padding: 10px 8px !important;
                width: 100% !important;
                box-sizing: border-box !important;
                flex-wrap: nowrap !important;
                overflow: visible !important;
            }
            
            /* Logo alanı */
            .navbaar-container .logo {
                display: flex !important;
                align-items: center !important;
                gap: 6px !important;
                flex-shrink: 0 !important;
            }
            
            .navbaar-container .logo img {
                width: 40px !important;
                height: 40px !important;
                object-fit: contain !important;
            }
            
            /* Anlık ziyaretçi sayacı - mobilde tam görünsün ve sola yaklaştır */
            .visitor-counts-navbar {
                padding: 5px 8px !important;
                font-size: 11px !important;
                flex-shrink: 0 !important;
                white-space: nowrap !important;
                overflow: visible !important;
                min-width: fit-content !important;
                margin-left: 4px !important;
            }
            
            .visitor-counts-navbar .icon {
                font-size: 14px !important;
                margin-right: 4px !important;
            }
            
            .visitor-counts-navbar span {
                display: inline-flex !important;
                align-items: center !important;
            }
            
            /* Nav linkler gizle - mobilde - MAVİ TEMA */
            .naav-linkss {
                display: none !important;
                position: absolute !important;
                top: 100% !important;
                right: 0 !important;
                background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%) !important;
                min-width: 160px !important;
                max-width: 200px !important;
                border-radius: 8px !important;
                box-shadow: 0 4px 20px rgba(0,0,0,0.25) !important;
                padding: 8px 0 !important;
                z-index: 10000 !important;
                flex-direction: column !important;
            }
            
            .naav-linkss.active {
                display: flex !important;
            }
            
            .naav-linkss li {
                list-style: none !important;
                width: 100% !important;
                margin: 0 !important;
                padding: 0 !important;
            }
            
            .naav-linkss li a {
                display: block !important;
                padding: 10px 16px !important;
                color: white !important;
                text-decoration: none !important;
                font-size: 14px !important;
                font-weight: 500 !important;
                transition: background 0.2s !important;
                border-bottom: none !important;
                text-align: left !important;
                white-space: nowrap !important;
            }
            
            .naav-linkss li a:hover {
                background: rgba(255,255,255,0.15) !important;
            }
            
            .naav-linkss li:last-child a {
                border-bottom: none !important;
            }
            
            /* Auth butonları */
            .auth-buttoons,
            .auth-buttons {
                display: flex !important;
                flex-direction: row !important;
                align-items: center !important;
                gap: 6px !important;
                margin: 0 !important;
                flex-shrink: 0 !important;
            }
            
            /* Kullanıcı adı butonu */
            .auth-buttoons .dropdown,
            .auth-buttons .dropdown,
            .auth-buttoons .user-dropdown,
            .auth-buttons .user-dropdown {
                flex-shrink: 0 !important;
            }
            
            .auth-buttoons .user-name,
            .auth-buttons .user-name {
                display: inline-flex !important;
                align-items: center !important;
                justify-content: center !important;
                min-width: 80px !important;
                max-width: 120px !important;
                height: 32px !important;
                padding: 0 10px !important;
                font-size: 11px !important;
                font-weight: 600 !important;
                white-space: nowrap !important;
                overflow: hidden !important;
                text-overflow: ellipsis !important;
                background: transparent !important;
                color: white !important;
                border: 1.5px solid white !important;
                border-radius: 6px !important;
                text-decoration: none !important;
            }
            
            /* Giriş Yap butonu */
            .auth-buttoons .login,
            .auth-buttons .login {
                display: inline-flex !important;
                align-items: center !important;
                justify-content: center !important;
                min-width: 70px !important;
                height: 32px !important;
                padding: 0 10px !important;
                font-size: 11px !important;
                font-weight: 600 !important;
                white-space: nowrap !important;
                background: transparent !important;
                color: white !important;
                border: 1.5px solid white !important;
                border-radius: 6px !important;
                text-decoration: none !important;
            }
            
            /* İlan Ver container */
            .post-ad-container {
                display: inline-flex !important;
                align-items: center !important;
                position: relative !important;
                flex-shrink: 0 !important;
            }
            
            /* İlan Ver butonu */
            .auth-buttoons .post-ad,
            .auth-buttons .post-ad {
                display: inline-flex !important;
                align-items: center !important;
                justify-content: center !important;
                min-width: 60px !important;
                height: 32px !important;
                padding: 0 10px !important;
                font-size: 11px !important;
                font-weight: 600 !important;
                white-space: nowrap !important;
                background: white !important;
                color: #009cfb !important;
                border: none !important;
                border-radius: 6px !important;
                text-decoration: none !important;
            }
            
            /* İlan Ver butonu - ilan-ver-btn class */
            .auth-buttoons .ilan-ver-btn,
            .auth-buttons .ilan-ver-btn {
                display: inline-flex !important;
                align-items: center !important;
                justify-content: center !important;
                min-width: 60px !important;
                height: 32px !important;
                padding: 0 10px !important;
                font-size: 11px !important;
                font-weight: 600 !important;
                white-space: nowrap !important;
            }
            
            /* Ücretsiz etiketi */
            .free-tag {
                position: absolute !important;
                top: -6px !important;
                left: -4px !important;
                font-size: 8px !important;
                padding: 2px 4px !important;
                background-color: #28a745 !important;
                color: white !important;
                font-weight: bold !important;
                border-radius: 3px !important;
                transform: rotate(-12deg) !important;
                z-index: 100 !important;
            }
            
            /* Hamburger menü butonu - HER ZAMAN GÖRÜNÜR */
            .mobile-menu-btn,
            #mobile-menu-btn {
                display: flex !important;
                visibility: visible !important;
                opacity: 1 !important;
                flex-direction: column !important;
                justify-content: center !important;
                align-items: center !important;
                width: 36px !important;
                height: 36px !important;
                padding: 6px !important;
                background: rgba(255,255,255,0.15) !important;
                border-radius: 6px !important;
                cursor: pointer !important;
                flex-shrink: 0 !important;
                margin-left: 6px !important;
            }
            
            #mobile-menu-btn div,
            .mobile-menu-btn div {
                width: 20px !important;
                height: 2px !important;
                background: white !important;
                margin: 2px 0 !important;
                border-radius: 1px !important;
            }
        }
        
        /* 500px - 1200px genişlik için özel düzenleme */
        @@media (min-width: 500px) and (max-width: 1200px) and (min-height: 1000px) {
            .navbaar {
                padding: clamp(6px, 1vw, 12px) clamp(5px, 0.8vw, 10px) !important;
            }
            
            .navbaar-container {
                padding: 0 clamp(5px, 0.8vw, 10px) !important;
                gap: clamp(5px, 0.8vw, 12px) !important;
            }
            
            /* Logo ve Anlık yazısı en sola yapıştır ve küçült */
            .navbaar-container .logo {
                max-width: min(140px, 15vw) !important;
                margin-left: 0 !important;
                padding-left: 0 !important;
            }
            
            .logo img {
                height: clamp(25px, 3vw, 35px) !important;
                width: auto !important;
            }
            
            .visitor-counts-navbar {
                font-size: clamp(7px, 0.8vw, 10px) !important;
                padding: clamp(2px, 0.4vw, 4px) clamp(4px, 0.7vw, 7px) !important;
                margin-left: clamp(3px, 0.6vw, 6px) !important;
            }
            
            .naav-linkss {
                margin-left: clamp(8px, 1.2vw, 15px) !important;
                gap: clamp(5px, 0.8vw, 12px) !important;
            }
            
            .naav-linkss li a {
                font-size: clamp(9px, 0.85vw, 12px) !important;
            }
        }
        
        /* MASAÜSTÜ GÖRÜNÜMÜ - Yükseklik 1200px ve üstünde (telefondan masaüstü sitesi göster seçildiğinde) */
        @@media (max-width: 991px) and (min-height: 1200px) {
            .navbaar {
                padding: 4px 3px !important;
            }

            .navbaar-container {
                display: flex !important;
                align-items: center !important;
                justify-content: space-between !important;
                flex-wrap: nowrap !important;
                gap: 4px !important;
                padding: 0 4px !important;
            }

            .logo img {
                height: 20px !important;
            }

            .visitor-counts-navbar {
                display: none !important;
            }

            .mobile-menu-btn,
            #mobile-menu-btn,
            .hamburger {
                display: none !important;
            }

            .naav-linkss {
                display: flex !important;
                position: static !important;
                background: transparent !important;
                flex-direction: row !important;
                gap: 6px !important;
                margin: 0 auto !important;
                padding: 0 !important;
                order: 2 !important;
                flex: 1 1 auto !important;
                justify-content: center !important;
                align-items: center !important;
                box-shadow: none !important;
            }

            .naav-linkss li {
                width: auto !important;
                flex-shrink: 0 !important;
            }

            .naav-linkss a,
            .naav-linkss li a {
                display: inline-block !important;
                padding: 0 !important;
                margin: 0 !important;
                font-size: 8px !important;
                font-weight: 600 !important;
                white-space: nowrap !important;
                border-bottom: none !important;
                color: white !important;
                line-height: 1.2 !important;
            }

            .auth-buttoons,
            .auth-buttons {
                flex-shrink: 0 !important;
                order: 3 !important;
                margin: 0 !important;
                gap: 4px !important;
                display: flex !important;
                align-items: center !important;
            }

            .auth-buttoons .ilan-ver-btn,
            .auth-buttons .ilan-ver-btn,
            .ilan-ver-btn {
                padding: 3px 6px !important;
                font-size: 7px !important;
                gap: 0 !important;
                border-radius: 4px !important;
                box-shadow: none !important;
                line-height: 1 !important;
                display: inline-flex !important;
                align-items: center !important;
                justify-content: center !important;
                height: 16px !important;
                margin-top: 2px !important;
            }

            .ilan-ver-btn i {
                display: none !important;
            }

            .auth-buttoons .login,
            .auth-buttons .login,
            .auth-buttoons .user-name,
            .auth-buttons .user-name,
            .login,
            .user-name {
                padding: 3px 6px !important;
                font-size: 7px !important;
                border-width: 1px !important;
                border-radius: 4px !important;
                line-height: 1 !important;
                display: inline-flex !important;
                align-items: center !important;
                justify-content: center !important;
                height: 16px !important;
            }

            .naav-linkss .nav-item-with-badge .new-badge {
                display: none !important;
            }

            .anlik-text,
            .anlik-text-short {
                display: none !important;
            }
        }
        
        .hidden {
            display: none;
        }
    </style>
</head>
<body>

    <!-- Navbar - Anasayfa ile aynı -->
    <partial name="_Navbar" />




    <h1 style="margin-top: 30px;">Kategori Seçimi</h1>
    <div class="main-container">
        <div class="container">
            <h3 style="text-align: center;" id="category-info"></h3> <!-- Seçim Bilgileri için yer -->

            <div class="step" id="step1">
                <h2>Kategori Seç</h2>
                <ul>
                    <li onclick="selectCategory('Konut (Yaşam Alanı)')">Konut (Yaşam Alanı)</li>
                    <li onclick="selectCategory('Arsa')">Arsa</li>
                    <li onclick="selectCategory('Bahçe')">Bahçe</li>
                    <li onclick="selectCategory('Tarla')">Tarla</li>
                    <li onclick="selectCategory('İş Yeri')">İş Yeri</li>
                    <li onclick="selectCategory('Turistik Tesis')">Turistik Tesis</li>
                </ul>
            </div>

            <div class="step hidden" id="step2">
                <h2>Durum Seçimi</h2>
                <ul>
                    <li onclick="selectType('Satılık')">Satılık</li>
                    <li onclick="selectType('Kiralık')">Kiralık</li>
                    <li onclick="selectType('Devren Satılık')">Devren Satılık</li>
                    <li onclick="selectType('Devren Kiralık')">Devren Kiralık</li>
                </ul>
            </div>

            <!-- Doğrulama Kontrol Modal -->
            <div id="checkVerificationModal" class="modal hidden">
                <div class="modal-content">
                    <div class="modal-icon processing">
                        <svg viewBox="0 0 24 24">
                            <path d="M12 2V6M12 18V22M6 12H2M22 12H18M4.92893 4.92893L7.75736 7.75736M16.2426 16.2426L19.0711 19.0711M19.0711 4.92893L16.2426 7.75736M7.75736 16.2426L4.92893 19.0711" />
                        </svg>
                    </div>
                    <h2 class="modal-title">Kimlik Doğrulama</h2>
                    <p class="modal-text">Bilgileriniz güvenle kontrol ediliyor</p>
                    <div class="loader"></div>
                </div>
            </div>

            <!-- Doğrulanmış Kullanıcı Modal -->
            <div id="verifiedUserModal" class="modal hidden">
                <div class="modal-content">
                    <div class="modal-icon success">
                        <svg viewBox="0 0 24 24">
                            <path d="M20 6L9 17L4 12" />
                        </svg>
                    </div>
                    <h2 class="modal-title">Doğrulama Başarılı!</h2>
                    <div class="user-info">
                        <div class="info-item">
                            <span>Ad Soyad:</span>
                            <strong id="verifiedUserName">John Doe</strong>
                        </div>
                        <div class="info-item">
                            <span>Doğrulama Kodu:</span>
                            <strong id="verifiedUserCode">XYZ-123</strong>
                        </div>
                    </div>
                </div>
            </div>

            <!-- E-Devlet Yönlendirme Modal -->
            <div id="eidsModal" class="modal hidden">
                <div class="modal-content">
                    <div class="modal-icon">
                        <svg viewBox="0 0 24 24">
                            <path d="M12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2ZM12 16L16 12M12 16L8 12M12 16L12 8" />
                        </svg>
                    </div>
                    <h2 class="modal-title">e-Devlet Yönlendirmesi</h2>
                    <p class="modal-text">Güvenli kimlik doğrulaması için yönlendiriliyorsunuz</p>
                    <div class="loader modern"></div>
                </div>
            </div>

            <script>
                async function selectType(type) {
                    // Örnek: "Seçilen Durum: Kiralık"
                    document.getElementById('confirmation-text').innerText = `Seçilen Durum: ${type}`;

                    // Kiralık veya Devren Kiralık seçilirse kimlik doğrulama kontrolü
                    if (type === 'Kiralık' || type === 'Devren Kiralık') {
                        showModal('checkVerificationModal');

                        try {
                            const response = await fetch('/Ilan/CheckUserVerification');
                            const data = await response.json();

                            // Modal en az 4 sn görünsün
                            setTimeout(() => {
                                if (data.isVerified) {
                                    showVerifiedUser(data);
                                    setTimeout(() => {
                                        document.getElementById('step3').classList.remove('hidden');
                                        hideModal('verifiedUserModal');
                                    }, 2000);
                                } else {
                                    hideModal('checkVerificationModal');
                                    showModal('eidsModal');
                                    setTimeout(redirectToEDevlet, getRandomDelay(3000, 8000));
                                }
                            }, 4000);
                        } catch (error) {
                            console.error('Hata:', error);
                            hideModal('checkVerificationModal');
                        }
                    } else {
                        // Satılık vb. durumlar için direkt step3 açılabilir
                        document.getElementById('step3').classList.remove('hidden');
                    }
                }

                function showVerifiedUser(data) {
                    hideModal('checkVerificationModal');
                    document.getElementById('verifiedUserName').textContent = `${data.name} ${data.surname}`;
                    document.getElementById('verifiedUserCode').textContent = data.verificationCode;
                    showModal('verifiedUserModal');
                }

                function showModal(modalId) {
                    document.getElementById(modalId).classList.remove('hidden');
                }

                function hideModal(modalId) {
                    document.getElementById(modalId).classList.add('hidden');
                }

                function getRandomDelay(min, max) {
                    return Math.floor(Math.random() * (max - min + 1)) + min;
                }

                // e-Devlet’e yönlendirme fonksiyonu
                function redirectToEDevlet() {
                    const firmaKodu = '4208673F-31D1-420B-9B23-60C9BF3897A2'; // appsettings’tekiyle aynı
                    const vergiNo = '8740152697'; // Sizin senaryonuzda kullanıyorsanız ekleyin
                    const returnUrl = encodeURIComponent(`${window.location.origin}/Ilan/EDevletCallback`);

                    // scope parametresi dokümanda TASINMAZ_YETKI olarak geçiyor
                    window.location.href = `https://eids.ticaret.gov.tr/oturum?firmaKodu=${firmaKodu}&vergiNo=${vergiNo}&returnUrl=${returnUrl}&scope=TASINMAZ_YETKI`;
                }
            </script>




            <div class="step hidden" id="step3">
                <h2>Alt Kategori Seç</h2>
                <input type="text" id="searchInput" placeholder="Alt kategori ara..." onkeyup="filterSubcategories()">
                <ul id="subcategoryList">
                    <!-- Alt kategoriler burada listelenecek -->
                </ul>
            </div>

            <div class="step hidden" id="step4">
                <h2>Tebrikler!</h2>
                <img src="~/sablon/img/tik.webp" alt="Tik işareti" style="width: 50px; height: 50px;">
                <p id="selections"></p>
                <p id="confirmation-text"></p>
                <p>Tebrikler! Kategori seçiminiz tamamlanmıştır.</p>
                <form id="categoryForm" style="text-align: center;">
                    <button type="button" onclick="redirectToCategory()" style="margin: 0 auto; display: block;">Devam</button>
                </form>
            </div>
        </div>
    </div>



   <script>
    let selectedCategory = '';

    function selectCategory(category) {
        // Kategori seçiminde mevcut tüm seçimleri sıfırla
        selectedCategory = category;
        document.getElementById('category-info').innerText = category;

        // Tüm adımları ve seçimleri sıfırla
        document.getElementById('selections').innerHTML = '';
        document.getElementById('confirmation-text').innerText = '';
        document.getElementById('step2').classList.add('hidden');
        document.getElementById('step3').classList.add('hidden');
        document.getElementById('step4').classList.add('hidden');

        // Alt kategori listesini güncelle
        let subcategories = [];
        switch (category) {
            case 'Konut (Yaşam Alanı)':
                            subcategories = ['Daire', 'Müstakil Ev', 'Villa', 'Köy Evi', 'Eski, Kargir Ev', 'Dağ Evi', 'Kerpiç Ev', 'Samanlık', 'Kulübe', 'Konteyner', 'Prefabrik', 'Bungalow', 'Tiny House', 'Loft Daire', 'Bina', 'Devremülk', 'Çiftlik Evi', 'Kooperatif',  'Köşk', 'Konak', 'Yalı', 'Ev ve Ahır',  'Rezidans', 'Diğer'];
                break;
                case 'Arsa':
                    subcategories = [
                        'A-Lejantlı Arsa', 'Bahçe', 'Çiftlik', 'Depo Ve Antrepo', 'Eğitim',
                        'Enerji Depolama', 'Hastane', 'Kamu Alanı', 'Karma', 'Konut',
                        'Konut + Ticaret', 'Muhtelif Arsa', 'Özel Kullanım', 'Petrol Lejantı',
                        'Sanayi', 'Sağlık', 'Sera', 'Sit Alanı', 'Spor Alanı', 'Tarım',
                        'Ticaret', 'Toplu Konut', 'Turizm', 'Turizm Arsa', 'Yeşil Alan', 'Diğer'
                    ];
                    break;

                case 'Bahçe':
                    subcategories = [
                                'Karışık', 'Ahududu', 'Armut', 'Avokado', 'Ayva', 'Badem',
        'Böğürtlen', 'Ceviz', 'Çilek', 'Dut', 'Elma',
        'Erik', 'Fındık', 'Greyfurt', 'Hurma', 'İğde',
        'Kayısı', 'Kestane', 'Kivi', 'Kızılcık', 'Kiraz',
        'Karışık', 'Lavanta', 'Limon', 'Mandalina', 'Muşmula',
        'Muz', 'Nar', 'Portakal', 'Şeftali', 'Üzüm',
        'Vişne', 'Zeytin', 'Diğer'
                    ];
                    break;

                case 'Tarla':
                    subcategories = [
                        'Ayçiçeği', 'Bakla', 'Bamya', 'Bağ', 'Bezelye', 'Çay', 'Çilek',
                        'Fasulye', 'Ispanak', 'Kabak', 'Marul', 'Patlıcan', 'Salatalık',
                        'Sarımsak', 'Tarla+Bağ', 'Tütün', 'Yer Fıstığı', 'Diğer'
                    ];
                    break;

                       case 'İş Yeri':
            subcategories = [
                'Akaryakıt İstasyonu', 'Apartman Dairesi', 'ATM Yeri', 'Aşevi', 'Atölye', 'AVM', 'Bakkal',
                'Beyaz Eşya', 'Bina', 'Büfe', 'Büro & Ofis', 'Cafe', 'Çay Bahçesi', 'Çiftlik', 'Depo & Antrepo',
                'Dershane', 'Diğer', 'Düğün Salonu', 'Dükkan & Mağaza', 'Eczane', 'Enerji Santrali',
                'Fabrika & Üretim Tesisi', 'Fırın & Tatlıcı', 'Garaj & Park Yeri', 'Genel', 'Hamam & Sauna',
                'Hastane', 'Huzurevi', 'İmalathane', 'İş Hanı Katı & Ofisi', 'Kahvehane', 'Kamu Binası',
                'Kantin', 'Kır & Kahvaltı Bahçesi', 'Kıraathane', 'Komple Bina', 'Konfeksiyon', 'Konferans Salonu',
                'Maden Ocağı', 'Market', 'Müstakil İş Yeri', 'Okul', 'Otopark', 'Pastane', 'Pazar Yeri', 'Plaza',
                'Plaza Katı & Ofisi', 'Radyo İstasyonu & TV Kanalı', 'Restoran & Lokanta', 'Rezidans',
                'Rezidans Katı & Ofisi', 'Sağlık Merkezi', 'Sanal Ofis', 'SPA', 'Spor Tesisi', 'Taksi Durağı',
                'Tamirhane', 'Talebe Yurdu', 'Terzi Dükkanı', 'Villa'
            ];

                    break;

                case 'Turistik Tesis':
                    subcategories = [
                        '1 Yıldızlı Otel', '2 Yıldızlı Otel', '3 Yıldızlı Otel', '4 Yıldızlı Otel', '5 Yıldızlı Otel',
                        'Apart', 'Bungalov', 'Butik Otel', 'Dağ Evi', 'Devremülk', 'Kamp Alanı', 'Tiny House',
                        'Yazlık', 'Diğer'
                    ];
                    break;

        }

        // Alt kategori listesini güncelle
        const subcategoryList = document.getElementById('subcategoryList');
        subcategoryList.innerHTML = ''; // Mevcut alt kategorileri temizle
        subcategories.forEach(function (subcategory) {
            let li = document.createElement('li');
            li.textContent = subcategory;
            li.onclick = function () { selectSubcategory(subcategory); };
            subcategoryList.appendChild(li);
        });

        document.getElementById('step2').classList.remove('hidden');
    }

    function selectSubcategory(subcategory) {
        const selections = document.getElementById('selections');
        selections.innerHTML = `<strong>Seçimleriniz:</strong><br>Kategori: ${selectedCategory}<br>Alt Kategori: ${subcategory}`;
        document.getElementById('step4').classList.remove('hidden');
    }




   function redirectToCategory() {
    const confirmationText = document.getElementById('confirmation-text').innerText; // Durumu al
    const selections = document.getElementById('selections').innerText; // Seçimleri al

    const selectedDurum = confirmationText.replace("Seçilen Durum: ", "");
    const selectedAltCategoryMatch = selections.match(/Alt Kategori: (.+)/);
    const selectedAltCategory = selectedAltCategoryMatch ? selectedAltCategoryMatch[1] : "";

    let redirectUrl = '';
    switch (selectedCategory) {
        case 'Konut (Yaşam Alanı)':
            redirectUrl = '@Url.Action("Konutilan", "Ilan")';
            break;
        case 'Arsa':
            redirectUrl = '@Url.Action("AraziIlan", "Ilan")';
            break;
        case 'Bahçe':
            redirectUrl = '@Url.Action("BahceIlan", "Ilan")';
            break;
        case 'Tarla':
            redirectUrl = '@Url.Action("Tarlailan", "Ilan")';
            break;
        case 'İş Yeri':
            redirectUrl = '@Url.Action("IsYeriIlan", "Ilan")';
            break;
        case 'Turistik Tesis':
            redirectUrl = '@Url.Action("TuristikTesisilan", "Ilan")';
            break;
    }

    // Query string ekle
    redirectUrl += `?durum=${encodeURIComponent(selectedDurum)}&subcategory=${encodeURIComponent(selectedAltCategory)}`;
    window.location.href = redirectUrl;
}


        function filterSubcategories() {
            const input = document.getElementById('searchInput');
            const filter = input.value.toLowerCase();
            const subcategoryList = document.getElementById('subcategoryList');
            const items = subcategoryList.getElementsByTagName('li');

            // Baş harfe öncelik vermek için iki dizi oluşturuyoruz
            const matchStart = [];
            const matchContains = [];

            for (let i = 0; i < items.length; i++) {
                const text = items[i].textContent || items[i].innerText;

                // Eğer baş harf eşleşiyorsa, bunu matchStart dizisine ekle
                if (text.toLowerCase().startsWith(filter)) {
                    matchStart.push(items[i]);
                }
                // Diğer eşleşmeleri matchContains dizisine ekle
                else if (text.toLowerCase().includes(filter)) {
                    matchContains.push(items[i]);
                }
            }

            // Önce baş harfi eşleşen öğeleri, sonra diğer eşleşen öğeleri göster
            matchStart.forEach(item => item.style.display = '');
            matchContains.forEach(item => item.style.display = '');

            // Geriye kalan öğeleri gizle
            for (let i = 0; i < items.length; i++) {
                if (!matchStart.includes(items[i]) && !matchContains.includes(items[i])) {
                    items[i].style.display = 'none';
                }
            }
        }
</script>

    <script>
        // Kullanıcı cihazını tespit et
        const isMobile8 = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);
        const whatsappNumber8 = "905558339022";
        const message8 = "Merhaba,%20Şevval%20Emlak%20Sitenizden%20Size%20Ulaşıyorum";

        // Doğru linki oluştur
        const whatsappLink8 = isMobile8
            ? `https://wa.me/${whatsappNumber8}?text=${message8}` // Mobilde uygulama
            : `https://web.whatsapp.com/send?phone=${whatsappNumber8}&text=${message8}`; // Tarayıcıda WhatsApp Web

        // Bağlantıyı ayarla
        var whatsappLinkElement = document.getElementById("whatsapp-link-8");
        if (whatsappLinkElement) {
            whatsappLinkElement.href = whatsappLink8;
        }
    </script>

    <style>
        .whatsapp-float {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1001;
        }

        .whatsapp-image {
            width: 90px;
            height: auto;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
            transition: transform 0.3s;
        }

        .whatsapp-image:hover {
            transform: scale(1.1);
        }
    </style>

</body>
</html>
