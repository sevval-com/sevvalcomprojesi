@model Sevval.Domain.Entities.IlanModel
@using Microsoft.AspNetCore.Identity
@using Sevval.Domain.Entities
@inject UserManager<ApplicationUser> UserManager

@{
    Layout = null; // Layout kullanılmıyor
}

<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kategori Seçimi</title>
    <link rel="stylesheet" href="~/css/KategoriSecim.css">
    <link rel="stylesheet" href="~/css/hizmetler.css">
    <link rel="icon" type="image/png" href="~/images/favlogo.webp">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>
<body>

    <!-- Navbar -->
    <nav class="navbaar">
        <div class="navbaar-container">
            <div class="logo">
                <a href="/">
                  <img src="~/images/LOGO mavi.webp" alt="Firma Logosu">
                </a>
                <span>Sevval.com</span>
            </div>
            <!-- Hamburger Menu Icon -->
            <div class="hamburger" id="hamburger-menu">
                <div class="line"></div>
                <div class="line"></div>
                <div class="line"></div>
            </div>
            <script>
                document.addEventListener("DOMContentLoaded", function () {
                    var hamburgerMenu = document.getElementById("hamburger-menu");
                    var navLinks = document.getElementById("nav-links");

                    // Hamburger menüye tıklanınca menüyü aç/kapat
                    hamburgerMenu.addEventListener("click", function (event) {
                        navLinks.classList.toggle("active");
                        event.stopPropagation(); // Hamburger menüye tıklanınca kapanmayı engelle
                    });

                    // Sayfanın herhangi bir yerine tıklanınca menüyü kapat
                    document.addEventListener("click", function (event) {
                        if (!navLinks.contains(event.target) && !hamburgerMenu.contains(event.target)) {
                            navLinks.classList.remove("active");
                        }
                    });
                });
            </script>
            <ul class="naav-linkss" id="nav-links">
                <li><a href="@Url.Action("Index", "Home")">Ana Sayfa</a></li>
                <li><a href="@Url.Action("KardesFirmalar", "Home")">Firmalar</a></li>
                <li class="dropdoawn">
                    <a href="@Url.Action("About", "Home")">Hakkımızda</a>
                </li>

                <li>
                    <a href="@Url.Action("Index", "VideolarSayfasi")">Videolar</a>
                </li>

                
                @if (User.Identity != null && User.Identity.IsAuthenticated)
                {
                    <li>
                        <a href="@Url.Action("Panel", "Ilan")">Mağazam</a>
                    </li>
                   
                }


            </ul>
            <div class="auth-buttoons">
                @if (User.Identity.IsAuthenticated)
                {
                    var currentUser = await UserManager.GetUserAsync(User);

                    // currentUser nesnesinin null olup olmadığını kontrol ediyoruz
                    if (currentUser != null)
                    {
                        <div class="dropdown">
                            <a href="#" class="user-name">@currentUser.FirstName @currentUser.LastName</a>
                            <ul class="dropdown-content">
                                <li><a href="@Url.Action("RedirectToStore", "Ilan", new { email = User.Identity.Name })">Mağazam</a></li>
                                <li><a href="@Url.Action("Panel", "Ilan")">Raporlar</a></li>
                                
                                <li><a href="@Url.Action("Ilanlar", "Ilan")">İlanlar</a></li>
                                <li><a href="@Url.Action("Danismanlar", "Ilan")">Danışmanlar</a></li>
                                <li><a href="@Url.Action("Sozlesmeler", "Ilan")">Sözleşmeler</a></li>
                                
                                <li><a href="@Url.Action("Index", "Satinal")">Satın Al</a></li>
                                <li><a href="@Url.Action("Settings", "Account")">Ayarlar</a></li>
                                @if (User.Identity.IsAuthenticated &&
                               (User.Identity.Name == "sftumen41@gmail.com" || User.Identity.Name == "exdel.txt@gmail.com"))

                                {
                                    <li><a href="@Url.Action("Index", "SevvalOfis")">Şevval Ofis</a></li>
                                }
                                <li><a href="@Url.Action("KategoriSecim", "Ilan" )">İlan Ver</a></li>
                                <li>
                                    <form asp-action="Logout" asp-controller="Account" method="post">
                                        <button type="submit" class="logout-btn">Çıkış Yap</button>
                                    </form>
                                </li>
                            </ul>
                        </div>
                    }
                    else
                    {
                        <p>Kullanıcı bilgileri alınamadı.</p> <!-- Kullanıcı bilgileri alınamadığında gösterilecek mesaj -->
                    }
                }
                else
                {
                    <a href="#" class="login" id="giris-buton">Giriş Yap</a>
                }


                <!-- İlan Ver butonu ve Ücretsiz etiketi -->
                <div class="post-ad-container">
                    <span class="free-tag">Ücretsiz</span>
                    <a href="@(!User.Identity.IsAuthenticated ? @Url.Action("Login", "Account",new {Type="GENEL"}) : Url.Action("KategoriSecim", "Ilan"))" class="post-ad" id="post-ad-button">+ İlan Ver</a>
                </div>
            </div>

            <!-- Yüzen Dil Seç Butonu -->
            <div id="floating_button">
                TR/EN
                <div id="google_translate_element"></div>
            </div>

            <!-- Google Translate API Script -->
            <script type="text/javascript">
                function googleTranslateElementInit() {
                    new google.translate.TranslateElement({pageLanguage: 'tr'}, 'google_translate_element');
                }
            </script>
            <script src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

            <!-- Butonun Aktifliği için JavaScript -->
            <script type="text/javascript">
                document.addEventListener('DOMContentLoaded', function () {
                    const floatingButton = document.getElementById('floating_button');
                    const translateElement = document.getElementById('google_translate_element');
                    let clickCount = 0; // Tıklama sayacı

                    // Çeviri elementini başlangıçta gizli yap
                    translateElement.style.display = "none";

                    floatingButton.addEventListener('click', function () {
                        clickCount++;

                        if (clickCount === 1) {
                            // İlk tıklamada çeviri elementini göster
                            translateElement.style.display = "block";
                        } else if (clickCount === 3) {
                            // Üçüncü tıklamada her şeyi gizle ve sayacı sıfırla
                            translateElement.style.display = "none";
                            clickCount = 0;
                        }
                    });

                    // Çeviri elementindeki dil seçme işlemi (içerikteki bir tıklama simülasyonu)
                    translateElement.addEventListener('click', function () {
                        console.log("Dil seçimi yapıldı!"); // İsteğe bağlı olarak işlev ekleyin
                    });
                });
            </script>

        </div>
    </nav>
    <style>
        .post-ad-container {
            position: relative;
            display: inline-block;
        }

        .free-tag {
            position: absolute;
            top: -10px;
            left: -10px; /* Daha sağa kaydırmak için artırabilirsiniz */
            background-color: #007bff; /* Mavi arka plan */
            color: white; /* Beyaz metin rengi */
            font-size: 10px;
            font-weight: bold;
            padding: 3px 8px;
            border-radius: 4px;
            transform: rotate(-10deg); /* Hafif eğik bir görünüm */
            z-index: 1;
            box-shadow: 0px 2px 4px rgba(0, 0, 0, 0.2); /* Hafif gölge */
        }

        .post-ad {
            display: inline-block;
            background-color: #ffffff; /* Beyaz arka plan */
            color: #007bff; /* Mavi yazı rengi */
            padding: 10px 15px;
            text-decoration: none;
            border-radius: 5px;
            font-weight: bold;
            border: 1px solid #007bff; /* Mavi çerçeve */
            transition: 0.3s ease;
        }

            .post-ad:hover {
                background-color: #007bff; /* Hoverda mavi arka plan */
                color: white; /* Hoverda beyaz metin */
            }

        .coming-soon-tag {
            position: absolute;
            top: 20px;
            left: 55px; /* Etiketi daha sağa kaydırmak için artırabilirsiniz */
            background-color: #007bff; /* Mavi arka plan */
            color: white; /* Beyaz metin rengi */
            font-size: 10px;
            font-weight: bold;
            padding: 3px 8px;
            border-radius: 4px;
            transform: none; /* Düz bir görünüm için çapraz rotayı kaldırdık */
            z-index: 1;
            box-shadow: 0px 2px 4px rgba(0, 0, 0, 0.2); /* Hafif gölge */
        }
    </style>
    <!-- Pop-up Penceresi -->
    <div id="popup-giris" class="pencere">
        <div class="pencere-icerik">
            <button class="kapat-buton" id="pencere-kapat">&times;</button> <!-- Kapat Butonu -->
            <div class="sol-bolum">
                <h2>Bireysel</h2>
                <a href="@Url.Action("Login", "Account")" class="baglanti">Giriş Yap</a>
                <a href="@Url.Action("Register", "Account")" class="baglanti">Üye Ol</a>
            </div>
            <div class="sag-bolum">
                <h2>Kurumsal</h2>
                <a href="@Url.Action("Login","Account")" class="baglanti">Giriş Yap</a>
                <a href="@Url.Action("EstateRegister", "Account")" class="baglanti">Üye Ol</a>
            </div>
        </div>
    </div>

    <style>
        /* Pop-up penceresi stili */
        .pencere {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            justify-content: center;
            align-items: center;
            z-index: 1100;
        }

        /* Pop-up içeriği stili */
        .pencere-icerik {
            background: linear-gradient(90deg, #1e88e5, #2196f3); /* Mavi tonları */
            width: 460px;
            height: 490px;
            display: flex;
            border-radius: 15px;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.3);
            overflow: hidden;
            animation: gorunmeEfekti 0.3s ease;
            position: relative;
            padding: 20px;
            box-sizing: border-box;
            margin: auto;
        }

        /* Sol ve sağ bölümler */
        .sol-bolum, .sag-bolum {
            flex: 1;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
        }

        /* Sağ bölümdeki ayırıcı */
        .sag-bolum {
            border-left: 2px solid #fff;
        }

        /* Başlık stilleri */
        h2 {
            margin-bottom: 20px;
            font-size: 28px;
            color: #fff;
            font-weight: bold;
        }

        /* Bağlantı buton stilleri */
        .baglanti {
            margin: 15px 0;
            padding: 15px 25px;
            background: #fff;
            color: #1e88e5;
            text-decoration: none;
            border-radius: 10px;
            border: none;
            cursor: pointer;
            transition: background 0.3s, transform 0.2s;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            font-size: 18px;
            width: 80%;
        }

            .baglanti:hover {
                background: #f1f1f1;
                transform: translateY(-2px);
            }

            .baglanti:focus {
                outline: none;
            }

        /* Kapat butonu */
        .kapat-buton {
            position: absolute;
            top: 10px;
            right: 10px;
            width: 40px;
            height: 40px;
            font-size: 30px;
            color: #fff;
            background: none;
            border: 2px solid #fff;
            text-align: center;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }

            .kapat-buton:hover {
                color: #d32f2f;
                border-color: #d32f2f;
            }
    </style>

    <script>
        // Giriş Yap butonuna tıklandığında pop-up penceresini aç
        document.getElementById('giris-buton').addEventListener('click', function (event) {
            event.preventDefault();
            document.getElementById('popup-giris').style.display = 'flex';
        });

        // Pop-up penceresinin dışında bir yere tıklandığında kapat
        document.getElementById('popup-giris').addEventListener('click', function (event) {
            if (event.target === this) {
                this.style.display = 'none';
            }
        });

        // Kapatma butonuna tıklandığında pop-up penceresini kapat
        document.getElementById('pencere-kapat').addEventListener('click', function () {
            document.getElementById('popup-giris').style.display = 'none';
        });
               function toggleHamburgerMenu() {
            // Menü öğesinin görünür olup olmadığını kontrol et
            if (document.querySelector('.naav-linkss')) {
                document.querySelector('.naav-linkss').classList.toggle('active');
            }
        }

        // Başlangıçta tıklama olayını ekleyelim
        document.querySelector('.haamburger').addEventListener('click', toggleHamburgerMenu);


    </script>

    <script>
        // Sayfa yüklendiğinde çalışacak kodlar
        window.onload = function() {
            // Hamburger menü
            const hamburger = document.getElementById('hamburger');
            const navLinks = document.getElementById('nav-links');

            if (hamburger) {
                hamburger.addEventListener('click', function() {
                    navLinks.classList.toggle('active');
                    hamburger.classList.toggle('active');
                });
            }

         

               // Kategori seçim fonksiyonları
        function selectType(type) {
            document.getElementById('confirmation-text').innerText = `Seçilen Durum: ${type}`;

            // Doğrulama sistemi olmadan step3 açılıyor
            document.getElementById('step3').classList.remove('hidden');
        }

    </script>




    <h1>Kategori Seçimi</h1>
    <div class="main-container">
        <div class="container">
            <h3 style="text-align: center;" id="category-info"></h3> <!-- Seçim Bilgileri için yer -->

            <div class="step" id="step1">
                <h2>Kategori Seç</h2>
                <ul>
                    <li onclick="selectCategory('Konut (Yaşam Alanı)')">Konut (Yaşam Alanı)</li>
                    <li onclick="selectCategory('Arsa')">Arsa</li>
                    <li onclick="selectCategory('Bahçe')">Bahçe</li>
                    <li onclick="selectCategory('Tarla')">Tarla</li>
                    <li onclick="selectCategory('İş Yeri')">İş Yeri</li>
                    <li onclick="selectCategory('Turistik Tesis')">Turistik Tesis</li>
                </ul>
            </div>

            <div class="step hidden" id="step2">
                <h2>Durum Seçimi</h2>
                <ul>
                    <li onclick="selectType('Satılık')">Satılık</li>
                    <li onclick="selectType('Kiralık')">Kiralık</li>
                    <li onclick="selectType('Devren Satılık')">Devren Satılık</li>
                    <li onclick="selectType('Devren Kiralık')">Devren Kiralık</li>
                </ul>
            </div>

            <!-- Doğrulama Kontrol Modal -->
            <div id="checkVerificationModal" class="modal hidden">
                <div class="modal-content">
                    <div class="modal-icon processing">
                        <svg viewBox="0 0 24 24">
                            <path d="M12 2V6M12 18V22M6 12H2M22 12H18M4.92893 4.92893L7.75736 7.75736M16.2426 16.2426L19.0711 19.0711M19.0711 4.92893L16.2426 7.75736M7.75736 16.2426L4.92893 19.0711" />
                        </svg>
                    </div>
                    <h2 class="modal-title">Kimlik Doğrulama</h2>
                    <p class="modal-text">Bilgileriniz güvenle kontrol ediliyor</p>
                    <div class="loader"></div>
                </div>
            </div>

            <!-- Doğrulanmış Kullanıcı Modal -->
            <div id="verifiedUserModal" class="modal hidden">
                <div class="modal-content">
                    <div class="modal-icon success">
                        <svg viewBox="0 0 24 24">
                            <path d="M20 6L9 17L4 12" />
                        </svg>
                    </div>
                    <h2 class="modal-title">Doğrulama Başarılı!</h2>
                    <div class="user-info">
                        <div class="info-item">
                            <span>Ad Soyad:</span>
                            <strong id="verifiedUserName">John Doe</strong>
                        </div>
                        <div class="info-item">
                            <span>Doğrulama Kodu:</span>
                            <strong id="verifiedUserCode">XYZ-123</strong>
                        </div>
                    </div>
                </div>
            </div>

            <!-- E-Devlet Yönlendirme Modal -->
            <div id="eidsModal" class="modal hidden">
                <div class="modal-content">
                    <div class="modal-icon">
                        <svg viewBox="0 0 24 24">
                            <path d="M12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2ZM12 16L16 12M12 16L8 12M12 16L12 8" />
                        </svg>
                    </div>
                    <h2 class="modal-title">e-Devlet Yönlendirmesi</h2>
                    <p class="modal-text">Güvenli kimlik doğrulaması için yönlendiriliyorsunuz</p>
                    <div class="loader modern"></div>
                </div>
            </div>

            <script>
                async function selectType(type) {
                    // Örnek: "Seçilen Durum: Kiralık"
                    document.getElementById('confirmation-text').innerText = `Seçilen Durum: ${type}`;

                    // Kiralık veya Devren Kiralık seçilirse kimlik doğrulama kontrolü
                    if (type === 'Kiralık' || type === 'Devren Kiralık') {
                        showModal('checkVerificationModal');

                        try {
                            const response = await fetch('/Ilan/CheckUserVerification');
                            const data = await response.json();

                            // Modal en az 4 sn görünsün
                            setTimeout(() => {
                                if (data.isVerified) {
                                    showVerifiedUser(data);
                                    setTimeout(() => {
                                        document.getElementById('step3').classList.remove('hidden');
                                        hideModal('verifiedUserModal');
                                    }, 2000);
                                } else {
                                    hideModal('checkVerificationModal');
                                    showModal('eidsModal');
                                    setTimeout(redirectToEDevlet, getRandomDelay(3000, 8000));
                                }
                            }, 4000);
                        } catch (error) {
                            console.error('Hata:', error);
                            hideModal('checkVerificationModal');
                        }
                    } else {
                        // Satılık vb. durumlar için direkt step3 açılabilir
                        document.getElementById('step3').classList.remove('hidden');
                    }
                }

                function showVerifiedUser(data) {
                    hideModal('checkVerificationModal');
                    document.getElementById('verifiedUserName').textContent = `${data.name} ${data.surname}`;
                    document.getElementById('verifiedUserCode').textContent = data.verificationCode;
                    showModal('verifiedUserModal');
                }

                function showModal(modalId) {
                    document.getElementById(modalId).classList.remove('hidden');
                }

                function hideModal(modalId) {
                    document.getElementById(modalId).classList.add('hidden');
                }

                function getRandomDelay(min, max) {
                    return Math.floor(Math.random() * (max - min + 1)) + min;
                }

                // e-Devlet’e yönlendirme fonksiyonu
                function redirectToEDevlet() {
                    const firmaKodu = '4208673F-31D1-420B-9B23-60C9BF3897A2'; // appsettings’tekiyle aynı
                    const vergiNo = '8740152697'; // Sizin senaryonuzda kullanıyorsanız ekleyin
                    const returnUrl = encodeURIComponent(`${window.location.origin}/Ilan/EDevletCallback`);

                    // scope parametresi dokümanda TASINMAZ_YETKI olarak geçiyor
                    window.location.href = `https://eids.ticaret.gov.tr/oturum?firmaKodu=${firmaKodu}&vergiNo=${vergiNo}&returnUrl=${returnUrl}&scope=TASINMAZ_YETKI`;
                }
            </script>




            <div class="step hidden" id="step3">
                <h2>Alt Kategori Seç</h2>
                <input type="text" id="searchInput" placeholder="Alt kategori ara..." onkeyup="filterSubcategories()">
                <ul id="subcategoryList">
                    <!-- Alt kategoriler burada listelenecek -->
                </ul>
            </div>

            <div class="step hidden" id="step4">
                <h2>Tebrikler!</h2>
                <img src="~/sablon/img/tik.webp" alt="Tik işareti" style="width: 50px; height: 50px;">
                <p id="selections"></p>
                <p id="confirmation-text"></p>
                <p>Tebrikler! Kategori seçiminiz tamamlanmıştır.</p>
                <form id="categoryForm">
                    <button type="button" onclick="redirectToCategory()">Devam</button>
                </form>
            </div>
        </div>
    </div>



   <script>
    let selectedCategory = '';

    function selectCategory(category) {
        // Kategori seçiminde mevcut tüm seçimleri sıfırla
        selectedCategory = category;
        document.getElementById('category-info').innerText = category;

        // Tüm adımları ve seçimleri sıfırla
        document.getElementById('selections').innerHTML = '';
        document.getElementById('confirmation-text').innerText = '';
        document.getElementById('step2').classList.add('hidden');
        document.getElementById('step3').classList.add('hidden');
        document.getElementById('step4').classList.add('hidden');

        // Alt kategori listesini güncelle
        let subcategories = [];
        switch (category) {
            case 'Konut (Yaşam Alanı)':
                            subcategories = ['Daire', 'Müstakil Ev', 'Villa', 'Köy Evi', 'Eski, Kargir Ev', 'Dağ Evi', 'Kerpiç Ev', 'Samanlık', 'Kulübe', 'Konteyner', 'Prefabrik', 'Bungalow', 'Tiny House', 'Loft Daire', 'Bina', 'Devremülk', 'Çiftlik Evi', 'Kooperatif',  'Köşk', 'Konak', 'Yalı', 'Ev ve Ahır',  'Rezidans', 'Diğer'];
                break;
                case 'Arsa':
                    subcategories = [
                        'A-Lejantlı Arsa', 'Bahçe', 'Çiftlik', 'Depo Ve Antrepo', 'Eğitim',
                        'Enerji Depolama', 'Hastane', 'Kamu Alanı', 'Karma', 'Konut',
                        'Konut + Ticaret', 'Muhtelif Arsa', 'Özel Kullanım', 'Petrol Lejantı',
                        'Sanayi', 'Sağlık', 'Sera', 'Sit Alanı', 'Spor Alanı', 'Tarım',
                        'Ticaret', 'Toplu Konut', 'Turizm', 'Turizm Arsa', 'Yeşil Alan', 'Diğer'
                    ];
                    break;

                case 'Bahçe':
                    subcategories = [
                                'Karışık', 'Ahududu', 'Armut', 'Avokado', 'Ayva', 'Badem',
        'Böğürtlen', 'Ceviz', 'Çilek', 'Dut', 'Elma',
        'Erik', 'Fındık', 'Greyfurt', 'Hurma', 'İğde',
        'Kayısı', 'Kestane', 'Kivi', 'Kızılcık', 'Kiraz',
        'Karışık', 'Lavanta', 'Limon', 'Mandalina', 'Muşmula',
        'Muz', 'Nar', 'Portakal', 'Şeftali', 'Üzüm',
        'Vişne', 'Zeytin', 'Diğer'
                    ];
                    break;

                case 'Tarla':
                    subcategories = [
                        'Ayçiçeği', 'Bakla', 'Bamya', 'Bağ', 'Bezelye', 'Çay', 'Çilek',
                        'Fasulye', 'Ispanak', 'Kabak', 'Marul', 'Patlıcan', 'Salatalık',
                        'Sarımsak', 'Tarla+Bağ', 'Tütün', 'Yer Fıstığı', 'Diğer'
                    ];
                    break;

                       case 'İş Yeri':
            subcategories = [
                'Akaryakıt İstasyonu', 'Apartman Dairesi', 'ATM Yeri', 'Aşevi', 'Atölye', 'AVM', 'Bakkal',
                'Beyaz Eşya', 'Bina', 'Büfe', 'Büro & Ofis', 'Cafe', 'Çay Bahçesi', 'Çiftlik', 'Depo & Antrepo',
                'Dershane', 'Diğer', 'Düğün Salonu', 'Dükkan & Mağaza', 'Eczane', 'Enerji Santrali',
                'Fabrika & Üretim Tesisi', 'Fırın & Tatlıcı', 'Garaj & Park Yeri', 'Genel', 'Hamam & Sauna',
                'Hastane', 'Huzurevi', 'İmalathane', 'İş Hanı Katı & Ofisi', 'Kahvehane', 'Kamu Binası',
                'Kantin', 'Kır & Kahvaltı Bahçesi', 'Kıraathane', 'Komple Bina', 'Konfeksiyon', 'Konferans Salonu',
                'Maden Ocağı', 'Market', 'Müstakil İş Yeri', 'Okul', 'Otopark', 'Pastane', 'Pazar Yeri', 'Plaza',
                'Plaza Katı & Ofisi', 'Radyo İstasyonu & TV Kanalı', 'Restoran & Lokanta', 'Rezidans',
                'Rezidans Katı & Ofisi', 'Sağlık Merkezi', 'Sanal Ofis', 'SPA', 'Spor Tesisi', 'Taksi Durağı',
                'Tamirhane', 'Talebe Yurdu', 'Terzi Dükkanı', 'Villa'
            ];

                    break;

                case 'Turistik Tesis':
                    subcategories = [
                        '1 Yıldızlı Otel', '2 Yıldızlı Otel', '3 Yıldızlı Otel', '4 Yıldızlı Otel', '5 Yıldızlı Otel',
                        'Apart', 'Bungalov', 'Butik Otel', 'Dağ Evi', 'Devremülk', 'Kamp Alanı', 'Tiny House',
                        'Yazlık', 'Diğer'
                    ];
                    break;

        }

        // Alt kategori listesini güncelle
        const subcategoryList = document.getElementById('subcategoryList');
        subcategoryList.innerHTML = ''; // Mevcut alt kategorileri temizle
        subcategories.forEach(function (subcategory) {
            let li = document.createElement('li');
            li.textContent = subcategory;
            li.onclick = function () { selectSubcategory(subcategory); };
            subcategoryList.appendChild(li);
        });

        document.getElementById('step2').classList.remove('hidden');
    }

    function selectSubcategory(subcategory) {
        const selections = document.getElementById('selections');
        selections.innerHTML = `<strong>Seçimleriniz:</strong><br>Kategori: ${selectedCategory}<br>Alt Kategori: ${subcategory}`;
        document.getElementById('step4').classList.remove('hidden');
    }




   function redirectToCategory() {
    const confirmationText = document.getElementById('confirmation-text').innerText; // Durumu al
    const selections = document.getElementById('selections').innerText; // Seçimleri al

    const selectedDurum = confirmationText.replace("Seçilen Durum: ", "");
    const selectedAltCategoryMatch = selections.match(/Alt Kategori: (.+)/);
    const selectedAltCategory = selectedAltCategoryMatch ? selectedAltCategoryMatch[1] : "";

    let redirectUrl = '';
    switch (selectedCategory) {
        case 'Konut (Yaşam Alanı)':
            redirectUrl = '@Url.Action("Konutilan", "Ilan")';
            break;
        case 'Arsa':
            redirectUrl = '@Url.Action("AraziIlan", "Ilan")';
            break;
        case 'Bahçe':
            redirectUrl = '@Url.Action("BahceIlan", "Ilan")';
            break;
        case 'Tarla':
            redirectUrl = '@Url.Action("Tarlailan", "Ilan")';
            break;
        case 'İş Yeri':
            redirectUrl = '@Url.Action("IsYeriIlan", "Ilan")';
            break;
        case 'Turistik Tesis':
            redirectUrl = '@Url.Action("TuristikTesisilan", "Ilan")';
            break;
    }

    // Query string ekle
    redirectUrl += `?durum=${encodeURIComponent(selectedDurum)}&subcategory=${encodeURIComponent(selectedAltCategory)}`;
    window.location.href = redirectUrl;
}


        function filterSubcategories() {
            const input = document.getElementById('searchInput');
            const filter = input.value.toLowerCase();
            const subcategoryList = document.getElementById('subcategoryList');
            const items = subcategoryList.getElementsByTagName('li');

            // Baş harfe öncelik vermek için iki dizi oluşturuyoruz
            const matchStart = [];
            const matchContains = [];

            for (let i = 0; i < items.length; i++) {
                const text = items[i].textContent || items[i].innerText;

                // Eğer baş harf eşleşiyorsa, bunu matchStart dizisine ekle
                if (text.toLowerCase().startsWith(filter)) {
                    matchStart.push(items[i]);
                }
                // Diğer eşleşmeleri matchContains dizisine ekle
                else if (text.toLowerCase().includes(filter)) {
                    matchContains.push(items[i]);
                }
            }

            // Önce baş harfi eşleşen öğeleri, sonra diğer eşleşen öğeleri göster
            matchStart.forEach(item => item.style.display = '');
            matchContains.forEach(item => item.style.display = '');

            // Geriye kalan öğeleri gizle
            for (let i = 0; i < items.length; i++) {
                if (!matchStart.includes(items[i]) && !matchContains.includes(items[i])) {
                    items[i].style.display = 'none';
                }
            }
        }
        @section Scripts {
                    <script src="~/js/auth.js"></script>
        }
</script>

    <style>
        .hidden {
            display: none;
        }
    </style>

    

  

    <script>
        // Kullanıcı cihazını tespit et
        const isMobile8 = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);
        const whatsappNumber8 = "905393756389";
        const message8 = "Merhaba,%20Şevval%20Emlak%20Sitenizden%20Size%20Ulaşıyorum";

        // Doğru linki oluştur
        const whatsappLink8 = isMobile8
            ? `https://wa.me/${whatsappNumber8}?text=${message8}` // Mobilde uygulama
            : `https://web.whatsapp.com/send?phone=${whatsappNumber8}&text=${message8}`; // Tarayıcıda WhatsApp Web

        // Bağlantıyı ayarla
        document.getElementById("whatsapp-link-8").href = whatsappLink8;
    </script>

    <style>
        .whatsapp-float {
            position: fixed;
            bottom: 20px; /* Ekranın altından 20px yukarıda */
            right: 20px; /* Ekranın sağından 20px içeride */
            z-index: 1001; /* Üstte görünmesini sağlamak için yüksek bir z-index */
        }

        .whatsapp-image {
            width: 90px; /* Resmin genişliği */
            height: auto; /* Yüksekliği orantılı olarak ayarla
                                    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2); /* Hafif gölge efekti */
            transition: transform 0.3s; /* Hover efekti için geçiş süresi */
        }

            .whatsapp-image:hover {
                transform: scale(1.1); /* Üzerine gelindiğinde büyütme efekti */
            }
    </style>

</body>
</html>
