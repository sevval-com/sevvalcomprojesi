@model IList<Sevval.Application.Features.Consultant.Queries.GetConsultantsByCompany.GetConsultantsByCompanyQueryResponse>

<h4>Danışmanlarımız ve Firma Sahibi</h4>
<div class="danisman-container">
    @if (Model != null && Model.Any())
    {
        @foreach (var consultant in Model)
        {
            string consultantPhotoPath = consultant.ProfilePhoto;
            if (!string.IsNullOrEmpty(consultantPhotoPath))
            {
                consultantPhotoPath = consultantPhotoPath.Replace("\\", "/");
                if (!consultantPhotoPath.StartsWith("http"))
                {
                    if (consultantPhotoPath.Contains("wwwroot/"))
                    {
                        consultantPhotoPath = consultantPhotoPath.Substring(consultantPhotoPath.IndexOf("wwwroot/") + 8);
                    }
                    else if (consultantPhotoPath.Contains("wwwroot"))
                    {
                        consultantPhotoPath = consultantPhotoPath.Substring(consultantPhotoPath.IndexOf("wwwroot") + 7);
                    }
                    if (!consultantPhotoPath.StartsWith("/"))
                    {
                        consultantPhotoPath = "/" + consultantPhotoPath;
                    }
                    consultantPhotoPath = "https://www.sevval.com" + consultantPhotoPath;
                }
            }
            <div class="user-card mb-4">
                <div class="user-card-body">
                    <div class="consultant-profile-img-container mb-3">
                        @if (!string.IsNullOrEmpty(consultantPhotoPath))
                        {
                            <img src="@consultantPhotoPath" alt="Profil Fotoğrafı" class="img-fluid rounded-circle consultant-profile-img">
                        }
                        else
                        {
                            <div class="text-center bg-light rounded-circle consultant-profile-img-placeholder">
                                <i class="fas fa-user fa-3x text-muted"></i>
                            </div>
                        }
                    </div>

                    <h5 class="user-card-title">
                        <a href="@Url.Action("UserIlanlar", "Ilan", new { email = consultant.Email })">
                            @consultant.FirstName @consultant.LastName
                        </a>
                    </h5>

                    <p class="user-card-text">
                        Danışman
                    </p>

                    <p class="user-card-text">
                        @consultant.TotalAnnouncementCount ilanı var.
                    </p>
                </div>
            </div>
        }
    }
    else
    {
        <div class="text-center">
            <p class="text-muted">Bu firmaya ait danışman bulunamadı.</p>
        </div>
    }
</div>
